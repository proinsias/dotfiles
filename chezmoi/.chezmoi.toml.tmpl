encryption = "age"
progress = true
verbose = true

[data]
    name = {{ promptStringOnce . "name" "Your full name" | default "Name" | quote}}
    email = {{ promptStringOnce . "email" "Email address" | default "name@example.com" | quote}}
    defaultkey = {{ promptStringOnce . "defaultkey" "Default gpg key" | default "123" | quote}}
    githubemail = {{ promptStringOnce . "githubemail" "GitHub email address" | default "name@example.com" | quote }}
    opaccount = {{ promptStringOnce . "opaccount" "1Password account" | default "opaccount" | quote }}
    slackrecipient = {{ promptStringOnce . "slackrecipient" "Slack recipient" | default "slackuser" | quote }}
    slacktoken = {{ promptStringOnce . "slacktoken" "Slack token" | default "123" | quote }}

    {{- $work := promptBoolOnce . "work" "Is this a work machine" | default false }}
    work = {{ $work }}
    {{- $test := promptBoolOnce . "test" "Is this a test machine" | default false }}
    test = {{ $test }}
    {{- $lite := promptBoolOnce . "lite" "Is this a lite machine" | default false }}
    lite = {{ $lite }}

    {{- if $work }}
    # Work-specific configuration
    {{- else }}
    # Personal machine configuration
    {{- end }}

[age]
    # passphrase = true
    identity = "~/.config/chezmoi/key.txt"
    recipient = {{ onepasswordRead "op://Parents/chezmoi/public-key" | quote}}

# [diff]
#     command = "code"
#     args = ["--wait", "--diff"]

[edit]
    command = "code"
    args = ["--wait"]

[git]
    autoCommit = false
    autoPush = false

[gpg]
    args = ["--quiet"]
    symmetric = true

{{ if eq .chezmoi.os "darwin" -}}
[[textconv]]
    pattern = "**/*.plist"
    command = "plutil"
    args = ["-convert", "xml1", "-o", "-", "-"]
{{- end }}
